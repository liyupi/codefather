# å¦‚ä½•é«˜æ•ˆæµ‹è¯•æ¥å£ï¼Ÿè‡ªåŠ¨ç”Ÿæˆæ¥å£æ–‡æ¡£

> æœ¬æ–‡ä½œè€…ï¼š[ç¨‹åºå‘˜é±¼çš®](https://yuyuanweb.feishu.cn/wiki/Abldw5WkjidySxkKxU2cQdAtnah)
>
> æœ¬ç«™åœ°å€ï¼š[https://codefather.cn](https://codefather.cn)


ä½œä¸ºä¸€ååç«¯ç¨‹åºå‘˜ï¼Œä¸€å®šè¦å¯¹è‡ªå·±å†™çš„æ¥å£è´Ÿè´£ï¼Œä¿è¯æ¥å£çš„æ­£ç¡®å’Œç¨³å®šæ€§ã€‚å› æ­¤ï¼Œæ¥å£æµ‹è¯•ä¹Ÿæ˜¯åç«¯å¼€å‘ä¸­çš„å…³é”®ç¯èŠ‚ã€‚

ä½†æˆ‘ç›¸ä¿¡ï¼Œå¾ˆå¤šæœ‹å‹æ˜¯æ‡’å¾—æµ‹è¯•æ¥å£çš„ï¼Œè§‰å¾—è¿™å¾ˆéº»çƒ¦ã€‚ä¸€èˆ¬è‡ªå·±å†™çš„æ¥å£è‡ªå·±éƒ½ä¸è°ƒç”¨ï¼Œè€Œæ˜¯ç›´æ¥ç”©ç»™å‰ç«¯æˆ–è€…å…¶ä»–è°ƒç”¨æ–¹å»éªŒè¯ï¼Œå‡ºäº†é—®é¢˜å†æ”¹ã€‚è™½ç„¶è‡ªå·±çˆ½äº†ï¼Œä½†åœ¨åˆ«äººçœ¼é‡Œï¼Œå¯èƒ½å·²ç»å¯¹ä½  â€œæ€€æ¨åœ¨å¿ƒâ€ï¼Œä¸æ˜¯ä¸æŠ¥ï¼Œæ—¶å€™æœªåˆ°è€Œå·²ã€‚

å…¶å®æµ‹è¯•æ¥å£å¹¶ä¸éš¾ï¼Œè¿™ç¯‡æ–‡ç« å°±ç»™å¤§å®¶åˆ†äº«ä¸€äº›å¸¸ç”¨çš„æ¥å£æµ‹è¯•å·¥å…·ï¼Œå…¶ä¸­æœ‰äº›å·¥å…·ä¸ä»…èƒ½å¸®åŠ©ä½ é«˜æ•ˆæµ‹è¯•æ¥å£ï¼Œç”šè‡³è¿˜èƒ½è‡ªåŠ¨ç”Ÿæˆæ¥å£ä»£ç å’Œæ¥å£æ–‡æ¡£ï¼



## å¸¸ç”¨æ¥å£æµ‹è¯•å·¥å…·

è¿™é‡Œç»™å¤§å®¶æ¨è 4 ç§å¸¸ç”¨çš„æ¥å£æµ‹è¯•å·¥å…·ï¼Œè‡³äºåˆ°åº•ç”¨å“ªä¸ªï¼Œå…¨å‡­å¤§å®¶çš„å–œå¥½ï¼Œè‡ªå·±ç”¨ç€èˆ’æœå°±å¥½ã€‚



### 1ã€cURL

cURL æ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„å‘½ä»¤è¡Œå·¥å…·ï¼Œå®ƒå¯ä»¥ç”¨å‘½ä»¤çš„å½¢å¼æ¥å‘é€å„ç§ç±»å‹çš„ HTTP è¯·æ±‚ã€‚è™½ç„¶å®ƒæ²¡æœ‰å›¾å½¢ç•Œé¢ï¼Œä½†æ˜¯å´éå¸¸çµæ´»ï¼Œæ·±å—å¼€å‘è€…ä»¬çš„å–œçˆ±ã€‚

> æŒ‡è·¯ï¼šhttps://curl.se/



cURL çš„ç”¨æ³•ä¹Ÿå¾ˆç®€å•ï¼Œæ¯”å¦‚æµ‹è¯• GET è¯·æ±‚ç±»å‹çš„æ¥å£ï¼Œåªéœ€è¾“å…¥ä¸‹åˆ—å‘½ä»¤ï¼š

```bash
curl <è¦æµ‹è¯•çš„æ¥å£åœ°å€>
```



æµ‹è¯• POST ç±»å‹çš„æ¥å£ï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š

```bash
curl -d '{"name":"yupi"}'
  -H "Content-Type: application/json"
  <è¦æµ‹è¯•çš„æ¥å£åœ°å€>
```



å…¶ä¸­ä½¿ç”¨ `-d` é€‰é¡¹è¡¨ç¤ºè¦å‘é€çš„æ•°æ®ï¼Œ`-H` é€‰é¡¹è®¾ç½®è¯·æ±‚å¤´ï¼ŒæŒ‡å®šå‘é€ JSON æ•°æ®ã€‚

ä»¥ä¸Šåªæ˜¯ cURL çš„åŸºç¡€ç”¨æ³•ï¼Œå®ƒè¿˜æ”¯æŒå¾ˆå¤šé«˜çº§çš„å‚æ•°ï¼Œä¸è¿‡æ²¡å¿…è¦å»è®°å¿†ã€‚ä¸€èˆ¬æˆ‘ä»¬åœ¨è°ƒç”¨åˆ«äººæ¥å£æ—¶ï¼Œå¯ä»¥å…ˆåœ¨ F12 å¼€å‘è€…å·¥å…·ä¸­æ‰¾åˆ°æŸä¸ªè¯·æ±‚ï¼Œç„¶åç‚¹å‡» `ä»¥ cURL æ ¼å¼å¤åˆ¶` å°±èƒ½å¾—åˆ°å¯ç›´æ¥ä½¿ç”¨çš„ curl å‘½ä»¤äº†ã€‚

![](https://pic.yupi.icu/1/1697727100098-011d8a12-2fe5-4421-8f8d-825c21d63f56.png)



å¼ºçƒˆå»ºè®®å¤§å®¶å­¦ä¼šä½¿ç”¨ cURLï¼Œå°¤å…¶æ˜¯ Linux å¼€å‘è€…ä»¬ï¼Œåœ¨æ²¡æœ‰å›¾å½¢ç•Œé¢çš„åœºæ™¯ä¸‹è¿™ä¸ªå·¥å…·å¯å¤ªå®ç”¨äº†ã€‚



### 2ã€Apifox

è¦æ˜¯å‡ å¹´å‰ï¼Œæˆ‘å¯èƒ½è¿˜ä¼šå»ºè®®å¤§å®¶å»ç”¨ Postman è¿™ç§å›¾å½¢ç•Œé¢æµ‹è¯•è½¯ä»¶ï¼Œä½†ç°åœ¨æ—¶ä»£å˜äº†ï¼Œè¶Šæ¥è¶Šå¤šå›½äº§çš„æ¥å£æµ‹è¯•å·¥å…·èƒ½åŠ›å·²ç»è¿œè¶…äº† Postmanã€‚

æ¯”å¦‚æˆ‘åœ¨ç”¨çš„ Apifoxï¼Œå®ƒæ˜¯ä¸€ä¸ªéå¸¸å¼ºå¤§çš„ `API è®¾è®¡ + å¼€å‘ + æµ‹è¯•ä¸€ä½“` çš„åä½œå·¥å…·ã€‚

> æŒ‡è·¯ï¼šhttp://apifox.com/b2liyupi



é¦–å…ˆæ˜¯æ”¯æŒ 20 å¤šç§æ ¼å¼çš„æ¥å£æ•°æ®å¯¼å…¥ï¼Œå¿«é€Ÿå¯è§†åŒ–æ¥å£ä¿¡æ¯ï¼š

![](https://pic.yupi.icu/1/1697727719582-3b58a60f-70a8-42b1-ba48-14adbeedd4c9.png)



ç„¶åå¯ä»¥ä¸€é”®è°ƒè¯•æ¥å£ï¼Œå“ªæ€•ä½ æœ¬åœ°çš„åç«¯æœåŠ¡å™¨æ²¡æœ‰å¯åŠ¨ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ Mock åŠŸèƒ½å¿«é€Ÿç”Ÿæˆæ¨¡æ‹Ÿæ•°æ®ï¼

![](https://pic.yupi.icu/1/1697727817429-5ebc1665-2179-45f3-aa55-bd863d78d01a.png)



Apifox è¿˜æœ‰ä¸ªå¾ˆå¼ºå¤§çš„èƒ½åŠ›ï¼Œæ”¯æŒåŸºäºæ¥å£ä¿¡æ¯å»ç”Ÿæˆ 130 å¤šç§è¯­è¨€åŠæ¡†æ¶çš„ä»£ç ï¼ä¹Ÿå°±æ˜¯è¯´ï¼Œä½ å¯ä»¥å…ˆå’Œå‰ç«¯çº¦å®šå¹¶ç¼–å†™å¥½æ¥å£æ–‡æ¡£ï¼Œç„¶åç›´æ¥ç”Ÿæˆä»£ç å°±èƒ½ç»™å‰ç«¯è°ƒè¯•äº†ã€‚

![](https://pic.yupi.icu/1/1697727951940-af4b1020-2acb-4730-b714-12cb863c3254.png)



æ›´å¤šçš„åŠŸèƒ½å°±å…ˆä¸ä»‹ç»äº†ï¼Œæ„Ÿå…´è¶£çš„åŒå­¦è‡ªå·±æ¢ç´¢ã€‚



### 3ã€IDEA çš„ HTTP Client

IntelliJ IDEA å¼€å‘å·¥å…·å†…ç½®äº†ä¸€ä¸ª HTTP Client å·¥å…·ï¼Œå®ƒå…è®¸å¼€å‘è€…åœ¨ IDE ä¸­ç›´æ¥åˆ›å»ºã€ç®¡ç†å’Œå‘é€ HTTP è¯·æ±‚ï¼Œå¹¶æŸ¥çœ‹å“åº”ç»“æœã€‚

ç”¨æ³•å¾ˆç®€å•ï¼Œé¦–å…ˆè¿›å…¥ IDE çš„ Tools => HTTP Clientï¼Œç‚¹å‡»åˆ›å»ºä¸€ä¸ªè¯·æ±‚ï¼š

æ”¯æŒå°† cURL è½¬æ¢ä¸º HTTP è¯·æ±‚ï¼Œå¯è§ cURL çš„åœ°ä½

![](https://pic.yupi.icu/1/1697728344182-79ba6724-5b50-4978-b037-b35f2fac0c75.png)

ç„¶åè¿›å…¥è¯·æ±‚ç¼–è¾‘ç•Œé¢ï¼Œåˆšå¼€å§‹ä¸ç†Ÿæ‚‰è¯·æ±‚ç¼–å†™è¯­æ³•çš„è¯ï¼Œå¯ä»¥ç‚¹å‡»å³ä¸Šè§’å¯¼å…¥ç¤ºä¾‹çš„è¯·æ±‚ä¿¡æ¯ï¼š

![](https://pic.yupi.icu/1/1697728547281-1407dd65-67d8-4a57-a4ac-3c5979338560.png)

æ¯”å¦‚å¯¼å…¥ä¸€ä¸ª GET è¯·æ±‚ç¤ºä¾‹ï¼š

![](https://pic.yupi.icu/1/1697728604443-a711636d-553c-4c68-9e1c-1f7992e73e3a.png)



ç„¶åç‚¹å‡»ç»¿è‰²çš„ç®­å¤´å°±èƒ½å‘é€æ¥å£æµ‹è¯•è¯·æ±‚äº†ï¼Œèƒ½å¤Ÿçœ‹åˆ°è¯¦ç»†çš„å“åº”ä¿¡æ¯ï¼š

![](https://pic.yupi.icu/1/1697728679041-2f5203ea-da78-4088-96d7-5ee408e79877.png)



ä¸è¿‡æˆ‘ä¸ªäººä¸å–œæ¬¢è¿™ç§æ–¹å¼æ¥æµ‹è¯•æ¥å£ï¼Œå†™ä»£ç å·²ç»å¾ˆç´¯äº†ï¼Œç»“æœæµ‹è¯•æ¥å£è¿˜è®©æˆ‘å†™ä»£ç ï¼Ÿï¼Ÿï¼Ÿ



### 4ã€Swagger å’Œ Knife4j

#### Swagger

Swagger æ˜¯ä¸€ä¸ªçŸ¥åçš„ API å¼€æºé¡¹ç›®ã€‚æ­¤å‰ï¼Œå¾ˆå¤šåŒå­¦å¯¹ Swagger çš„è®¤è¯†å¯èƒ½ä»…åœç•™åœ¨ç”Ÿæˆæ¥å£æ–‡æ¡£ï¼Œå³ä¸‹å›¾çš„ `Swagger UI`ï¼Œå¯ä»¥åœ¨çº¿æŸ¥çœ‹å’Œè°ƒè¯•æ¥å£ä¿¡æ¯ã€‚

> æŒ‡è·¯ï¼šhttps://swagger.io/tools/swagger-ui/

![](https://pic.yupi.icu/1/1697728940485-0597573e-97c2-4867-a79e-9cdb0aab2f04.png)



ä½†å®é™…ä¸Šï¼ŒSwagger UI åªæ˜¯ Swagger çš„å…¶ä¸­ä¸€ä¸ªåŠŸèƒ½ï¼ŒSwagger è¿˜åŒ…å«äº† Swagger Editor æ¥å£ç¼–è¾‘å™¨ã€Swagger Codegen ä»£ç ç”Ÿæˆå™¨ç­‰å¼ºå¤§å·¥å…·ã€‚

![](https://pic.yupi.icu/1/1697729062255-9dbd38c5-dfc1-4de8-a42d-8b824c59f9da.png)



ä¸¥æ ¼æ¥è¯´ï¼ŒSwagger æ˜¯ **ä¸€å¥—** å®Œæ•´çš„ API å¼€å‘å·¥å…·ï¼Œè®©æˆ‘ä»¬åœ¨ç»Ÿä¸€çš„ç•Œé¢ä¸­å®Œæˆ API è®¾è®¡ã€æ¥å£å¼€å‘ã€æ¥å£æµ‹è¯•ã€æ–‡æ¡£ç”Ÿæˆç­‰åŠŸèƒ½ï¼Œæå¤§åœ°æé«˜äº†å¼€å‘æ•ˆç‡ã€‚

ä¸€èˆ¬æ¥è¯´ï¼Œåªéœ€è¦åœ¨é¡¹ç›®ä¸­å¼•å…¥ Swagger ä¾èµ–ï¼Œå¹¶ä¸”é€šè¿‡æ³¨è§£çš„æ–¹å¼æ¥æè¿° API çš„ä¿¡æ¯ï¼Œå°±å¯ä»¥ä½¿ç”¨å®ƒè¿›è¡Œæ¥å£æµ‹è¯•å’Œæ–‡æ¡£ç”Ÿæˆäº†ã€‚

ä½†å…¶å®ï¼Œæˆ‘ä¸ªäººå·²ç»å¾ˆä¹…æ²¡æœ‰ç›´æ¥ä½¿ç”¨ Swagger äº†ï¼Œè€Œæ˜¯ä¼šé€‰ç”¨å®ƒçš„å¢å¼ºç‰ˆ `Knife4j` æ¥ç”Ÿæˆæ¥å£æ–‡æ¡£ã€‚è¦è¯´åŸå› çš„è¯ï¼Œå°±æ˜¯ Swagger çš„é»˜è®¤ç•Œé¢æœ‰ç‚¹å°ä¸‘ï¼ŒAPI å¤šäº†ç®¡ç†èµ·æ¥å°±ä¼šå¾ˆéº»çƒ¦ã€‚

æ„Ÿå—ä¸€ä¸‹ï¼š

![](https://pic.yupi.icu/1/1697729785541-29de1f7b-e428-4ba8-8104-8fe75af138d3.png)



#### Knife4j

Knife4j æ˜¯ä¸€ä¸ªåŸºäº Swagger çš„å¢å¼ºå·¥å…·ï¼Œå®ƒæä¾›äº†æ›´ç¾è§‚çš„ç•Œé¢å’Œæ›´å¤šåŠŸèƒ½ï¼Œè®©æ¥å£æµ‹è¯•å’Œæ–‡æ¡£ç”Ÿæˆæ›´åŠ é«˜æ•ˆã€‚

> æŒ‡è·¯ï¼šhttps://doc.xiaominfo.com/



Knife4j çš„ç”¨æ³•å¾ˆç®€å•ï¼ŒæŒ‰ç…§å®˜æ–¹æ–‡æ¡£çš„æŒ‡å¼•ï¼Œé¦–å…ˆæ ¹æ®è‡ªå·±é¡¹ç›®çš„ Spring Boot ç‰ˆæœ¬å¼•å…¥å¯¹åº”çš„ä¾èµ–ï¼Œæ¯”å¦‚ Spring Boot 2.x æ¨èä½¿ç”¨ä»¥ä¸‹ Maven é…ç½®ï¼š

```xml
<dependency>
    <groupId>com.github.xiaoymin</groupId>
    <artifactId>knife4j-openapi2-spring-boot-starter</artifactId>
    <version>4.3.0</version>
</dependency>
```



ç„¶ååœ¨ Spring Boot çš„é…ç½®æ–‡ä»¶ `application.yml` ä¸­æ·»åŠ  Knife4j ç›¸å…³é…ç½®ï¼Œæ¯”å¦‚ï¼š

```yaml
knife4j:
  enable: true
  openapi:
    title: Knife4j æ–‡æ¡£
```



æœ€åï¼Œè®¿é—® Knife4j çš„æ–‡æ¡£åœ°å€ï¼ˆä¸€èˆ¬æ˜¯é¡¹ç›®åœ°å€ + `/doc.html`ï¼‰ï¼Œå³å¯æŸ¥çœ‹è‡ªåŠ¨æ ¹æ® Controller æ¥å£ä»£ç è€Œç”Ÿæˆçš„æ¥å£æ–‡æ¡£ã€‚

ç¤ºä¾‹æ–‡æ¡£å¦‚ä¸‹ï¼š

![](https://pic.yupi.icu/1/1697730186817-40f8d1db-ea19-45f9-ae0e-b7f032c0189e.png)

é€‰ä¸­æŸä¸ªæ¥å£ï¼Œå°±å¯ä»¥åœ¨çº¿è°ƒè¯•äº†ï¼š

![](https://pic.yupi.icu/1/1697730368657-397cec17-d11a-4d40-a620-ab6d4b9b3918.png)



å½“ç„¶ï¼Œå› ä¸º Knife4j çš„åº•å±‚ä¹Ÿæ˜¯ä¾èµ– Swagger çš„ï¼Œæ‰€ä»¥ä½ è¿˜å¯ä»¥ä½¿ç”¨ Swagger æ³¨è§£æ¥è‡ªå®šä¹‰æ¥å£çš„ä¿¡æ¯ã€‚

æ¯”å¦‚ä¸‹åˆ—ä»£ç ï¼Œå°±ä½¿ç”¨äº† Swagger çš„ @Api å’Œ @ApiOperation æ³¨è§£ç»™æ¥å£æ·»åŠ åç§°å’Œæè¿°ä¿¡æ¯ï¼š

```java
@RestController
@RequestMapping("/api/posts")
@Api(tags = "å¸–å­ç®¡ç†")
public class PostController {

    @PostMapping
    @ApiOperation(value = "åˆ›å»ºå¸–å­", notes = "ç”¨äºåˆ›å»ºæ–°çš„å¸–å­")
    public ResponseEntity<String> createPost(@RequestBody PostRequest postRequest) {
        // åœ¨è¿™é‡Œå®ç°åˆ›å»ºå¸–å­çš„é€»è¾‘
        return ResponseEntity.ok("å¸–å­åˆ›å»ºæˆåŠŸ");
    }
}
```



è¿™æ ·èƒ½è®©ç”Ÿæˆçš„æ¥å£æ–‡æ¡£æ›´é€šä¿—æ˜“æ‡‚ï¼Œè€Œä¸æ˜¯å¤§æŠŠçš„è‹±æ–‡ã€‚



------



æ€»ç»“ä¸€ä¸‹ï¼Œæˆ‘ä¸ªäººæœ€æ¨èçš„æ¥å£è°ƒè¯•æ–¹å¼æ˜¯ cURLã€Apifox å’Œ Knife4j çš„ç»„åˆï¼š

- æ— ç•Œé¢ï¼ˆLinuxï¼‰ç¯å¢ƒç”¨ cURL
- æ¡Œé¢ç«¯ç®¡ç†æ¥å£ã€Mock æ•°æ®ç”¨ Apifox
- é¡¹ç›®ä¸­å¼•å…¥ Knife4jï¼Œå®ç°å¿«é€Ÿçš„æ¥å£æ–‡æ¡£ç”Ÿæˆå’Œ web å…±äº«



## å®è·µ

ç¼–ç¨‹å¯¼èˆªçš„æ‰€æœ‰åç«¯é¡¹ç›®éƒ½ä½¿ç”¨äº† Swagger + Knife4j å®ç°æ¥å£è°ƒè¯•å’Œæ¥å£æ–‡æ¡£ç”Ÿæˆã€‚

ğŸ‘‰ğŸ» ç¼–ç¨‹å¯¼èˆªåŸåˆ›é¡¹ç›®æ•™ç¨‹ç³»åˆ—ï¼šhttps://yuyuanweb.feishu.cn/wiki/SePYwTc9tipQiCktw7Uc7kujnCd
