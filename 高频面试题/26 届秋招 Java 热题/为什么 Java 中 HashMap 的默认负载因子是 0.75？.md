## 为什么 Java 中 HashMap 的默认负载因子是 0.75？
> 八股文一网打尽，更多面试题请看[程序员面试刷题神器 - 面试鸭](https://www.mianshiya.com/)

## 回答重点

`HashMap` 的默认负载因子为 0.75 是为了在**时间复杂度**和**空间复杂度**之间取得一个合理的平衡。负载因子为 0.75 时，避免过多扩容的同时，也保证了不会出现过多的哈希冲突，确保查找和插入操作的效率，维持良好的性能表现。

### 扩展知识

### 什么是负载因子

负载因子是 `HashMap` 中的一个参数，用来衡量 `HashMap` 的满载程度，公式为：  `负载因子 = 实际存储的元素数量 / 容量`。

当 `HashMap` 中存储的元素数量超过 `容量 × 负载因子` 时，`HashMap` 会进行扩容操作，增加容量以维持性能。

### 为什么不选择 1.0 作为默认负载因子

尽管负载因子 1.0 可以减少扩容次数，提高内存利用率，但它增加了哈希冲突的可能性。冲突过多会导致桶内链表或红黑树变长，降低查找、插入和删除的效率。因此，负载因子 1.0 会使得时间复杂度劣化为 O(n)，不利于 `HashMap` 的高效运行。

### HashMap 源码注释解读

其实在 HashMap 的源码中有这么一段注释：

<p align="center"><img src="https://pic.code-nav.cn/mianshiya/question_picture/1772087337535152129/IzQdlrA8_20b7c330-9493-4ce7-8a8a-2e6713e00ac1_mianshiya.png" alt="" width="556" /></p>

简单理解下就是设置 0.75 是因为空间和时间上的平衡。

较低的负载因子（例如 0.5）会导致 HashMap 需要频繁扩容，空间利用率就低。不过因为冲突少，查找效率就高，但是因为扩容频繁会增加 rehashing 的开销。

较高的负载因子（例如 1.0）会减少扩容次数，空间利用率高了，但会增加哈希冲突的概率，从而降低查找效率。

经过大量实践，0.75 被认为是大多数场景下比较合适的值，能够在时间和空间之间取得良好的平衡。

所以设置了 0.75。

### **不同场景下的负载因子调整**
在某些特定场景下，可以根据业务需求调整 `HashMap` 的负载因子。例如：
 - **高并发读取场景**：可以降低负载因子（如 0.5），以减少哈希冲突，提高读取性能。
 - **内存受限场景**：可以提高负载因子（如 0.85 或更高），以减少扩容次数和内存消耗，但可能会降低写入和查询的性能。

> 八股文一网打尽，更多面试题请看[程序员面试刷题神器 - 面试鸭](https://www.mianshiya.com/)