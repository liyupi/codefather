## 数组和链表在 Java 中的区别是什么？
> 八股文一网打尽，更多面试题请看[程序员面试刷题神器 - 面试鸭](https://www.mianshiya.com/)

## 回答重点

**在存储结构方面**：

数组基于连续的内存块，大小是固定的，需要重新分配内存来改变数组大小，内存使用紧凑但容易浪费空间。

链表是基于节点的结构，在内存中不需要连续存储，可以动态变化大小和插入删除节点，内存不连续但可以动态扩展。

**在访问速度方面**：

数组支持 O(1) 时间的随机访问，可以通过索引直接访问任何元素。

```
+----+----+----+----+----+----+
| 10 | 20 | 30 | 40 | 50 | 60 |
+----+----+----+----+----+----+
^
|
Index
```

而链表访问特定元素需要线性时间O(n)，因为节点在内存中不一定连续，访问效率受限于链表的结构。

```
Head
 |
 v
+----+----+     +----+----+     +----+----+
| 10 | *----> | 20 | *----> | 30 | *----> NULL
+----+----+     +----+----+     +----+----+
     ^               ^               ^
     |               |               |
   Node             Node             Node
```

**在操作方面**：

数组插入和删除需要移动数据，时间复杂度为 O(n)，而链表则很灵活，可在 O(1) 时间插入和修改指定位置元素。

**在适用场景方面**：

数组适合需要快速随机访问且大小固定的场景，如实现缓存、表格等数据结构。

链表适合需要频繁插入和删除操作且大小不确定的场景，如队列、栈、链表等

## 扩展知识

数组的内存是连续的，且存储的元素大小是固定的，实现上是基于一个内存地址，然后由于元素固定大小，支持利用下标的直接访问。

具体是通过下标 * 元素大小+内存基地址算出一个访问地址，然后直接访问，所以随机访问的效率很高，O(1)。

<img src="https://pic.code-nav.cn/mianshiya/question_picture/1783397053004488705/20220219202821_mianshiya.png" alt="20220219202821.png" width="100%" />

而由于要保持内存连续这个特性，不能在内存中间空一块，所以删除中间元素时就需要搬迁元素，需进行内存拷贝，所以说删除的效率不高。

链表的内存不需要连续，它们是通过指针相连，这样对内存的要求没那么高（数组的申请需要一块连续的内存），链表就可以散装内存，不过链表需要额外存储指针，所以总体来说，链表的占用内存会大一些。

<img src="https://pic.code-nav.cn/mianshiya/question_picture/1783397053004488705/20220219202832_mianshiya.png" alt="20220219202832.png" width="100%" />

且由于是指针相连，所以直接无法随机访问一个元素，必须从头（如双向链表，可尾部）开始遍历，所以随机查找的效率不高，O(n)。

也由于指针相连这个特性，单方面删除的效率高，因为只需要改变指针即可，没有额外的内存拷贝动作(但是要找到这个元素，费劲儿呀，除非你顺序遍历删)。

> 两者大致的特点就如上所说，再扯地深一点，就要说到 CPU 亲和性问题

这里可以延展到空间局部性。

空间局部性（spatial locality）：如果一个存储器的位置被引用，那么将来它附近的位置也会被引用。

根据这个原理，就会有预读功能，像 CPU 缓存就会读连续的内存，这样一来如果你本就要遍历数组的，那么你后面的数据就已经被上一次读取前面数据的时候，一块被加载了，这样就是 CPU 亲和性高。

反观链表，由于内存不连续，所以预读不到，所以 CPU 亲和性低。

对了，链表（数组）加了点约束的话，还可以用作栈、队列和双向队列。

像 LinkedList 就可以用来作为栈或者队列使用。

> 八股文一网打尽，更多面试题请看[程序员面试刷题神器 - 面试鸭](https://www.mianshiya.com/)