## 如何计算 CSS 的优先级？
> 八股文一网打尽，更多面试题请看[程序员面试刷题神器 - 面试鸭](https://www.mianshiya.com/)

## 回答重点

CSS 样式的优先级是通过一个**特定的计算规则**来确定的，其计算方法如下

### 1、**优先级等级**：
从高到低，依次为：
   - 内联样式（直接在 HTML 元素上的 `style` 属性）。
   - ID 选择器（如 `#id`）。
   - 类选择器、属性选择器和伪类选择器（如 `.class`、`[attr=value]`、`:hover`）。
   - 元素选择器和伪元素选择器（如 `div`、`::before`）。
   - 通配符选择器（如 `*`）、后代选择器（如 `div p`）、子选择器（如 `div > p`）等组合选择器。

### 2、 **优先级计算**：
按照以下方式计算选择器的权重：
   - 每个内联样式加 `1000` 分。
   - 每个 ID 选择器加 `100` 分。
   - 每个类选择器、属性选择器和伪类选择器加 `10` 分。
   - 每个元素选择器和伪元素选择器加 `1` 分。

### 3、**比较优先级**：
根据上述计算结果进行比较，分数高的优先级高。若优先级相同，则后定义的样式优先。
```html
<div id='div' class='div'>测试 CSS 优先级</div>
```

```css
// 优先级为 `100`
#div {
    width: 100px;
    height: 100px;
    color: red;
}
// 优先级为 `10`
.div {
    border: 1px solid #333;
    color: green;
}
// 优先级为 `1`
div {
    font-size: 16px;
    color: #333;
}
```
上面这个示例中，div 的 style 权重最终为 100+10+1 = 111；但是根据样式优先级的规则，最终字体展示的颜色应为 `#div` 的 red

## 扩展知识
更为详细的权重值表格如下

| **选择器类型** | **格式** | **优先级权重** |
| --- | --- | --- |
| ID选择器 | #id | 100 |
| 类选择器 | .classname | 10 |
| 属性选择器 | a[ref="eee"] | 10 |
| 伪类选择器 | li:last-child | 10 |
| 标签选择器 | div | 1 |
| 伪元素选择器 | li:after | 1 |
| 相邻兄弟选择器 | h1 + p | 0 |
| 子选择器 | ul > li | 0 |
| 后代选择器 | li a | 0 |
| 通配符选择器 | * | 0 |

### 注意事项
- !important 声明的样式的优先级最高。
- 优先级相同：如果优先级相同，则最后出现的样式生效。
- 继承样式：继承得到的样式的优先级最低。
- 权值为 0：通用选择器（*）、子选择器（>）和相邻同胞选择器（+）的权值为 0。
- 内联样式 > 内部样式 > 外部样式 > 浏览器用户自定义样式 > 浏览器默认样式。

### 示例

根据拓展知识，我们改一下最初的 demo 的样式，看看最终哪个字体颜色生效

```html
<div id='div' class='div' style="color: yellow">测试 CSS 优先级</div>
```

```css
// 优先级为 `100`
#div {
    width: 100px;
    height: 100px;
    color: red;
}
// 优先级为 `10`
.div {
    border: 1px solid #333;
    color: green;
}
// 优先级为 `1`
div {
    font-size: 16px;
    color: blue !important;
}
```
可以得出字体颜色最终生效的是 `color: blue !important;`，所以最终字体展示的颜色为   `blue`


> 八股文一网打尽，更多面试题请看[程序员面试刷题神器 - 面试鸭](https://www.mianshiya.com/)