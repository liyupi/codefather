# 重载运算符

在 C++ 中，运算符是一种相当重要的程序抽象和增强。它通过运算符重载机制，允许用户重新定义大多数标准运算符的行为，从而使 C++ 语言具有更加灵活、自由的表达能力，可以让程序员编写更加简洁、优雅的代码。

运算符重载的目的是使自定义类型（定义过的类）能够像内置类型那样使用标准运算符。比如使用了自定义类的对象可以进行加、减、乘、除等一系列的运算，还可以直接用 cout 方法输出，而不用再写类似于 GetX() 的函数来获得其中的某些数据。本篇文章将会详细介绍如何重载运算符、操作符重载的重要性以及操作符重载的一些限制。

## 什么是运算符重载？

C++ 中允许用户为单目运算符和双目运算符重新定义操作，这种重新定义操作或新增操作的原理就是重载。运算符又可以分为一元运算符和二元运算符两大类，一元运算符如取反、取地址、取值等；二元运算符如赋值、加减乘除等。

重载运算符的定义方式都是以 operator 关键字开始的函数。这样的函数名叫做运算符函数。对于单目运算符，在 operator 关键字后面跟运算符号称之为运算符函数名；对于双目运算符，在 operator 关键字后面跟运算符号（去掉两端的空格）这样的函数称之为运算符函数名。

以加号运算符为例，它通常是用来进行加法运算的，但是通过重载操作符我们可以重新定义加号运算符的行为，比如我们可以把加号运算符用来实现字符串的拼接操作，这样代码的可读性就更强了。

## 如何重载运算符？

重载一个运算符就相当于给一个运算符定义新的行为，只需要定义出一个相应的函数来实现这个新的行为即可，这个函数就像一个一般的函数一样定义即可，只不过它的名字是固定的。

下面我们以重载加法运算符为例，举一个例子：

```C++
#include<iostream>
using namespace std;
class MyInt {
    int nVal;
public:
    MyInt(int n) { nVal = n; }
    int ReturnVal() { return nVal; }
    MyInt operator++() { // 重载前置++运算符
        ++nVal;
        return *this; //注意前置++运算符返回引用
    }
};
int main () {
    int n;
    while(cin >> n) {
        MyInt objInt(n);
        MyInt obj2Int = ++objInt;
        cout << obj2Int.ReturnVal() <<","<< objInt.ReturnVal() << endl;
    }
    return 0;
}
```

上述代码是一个对自定义整型类进行前置递增运算符重载的示例。其具体含义和实现过程如下,代码中有详细注释：

```C++
MyInt operator++() { // 重载前置++运算符
        ++nVal;
        return *this; //前置++运算符返回引用
}
```

## 操作符重载的重要性及其限制

操作符重载是一项非常强大的功能，但是它也有一定的限制。在进行操作符重载时，必须坚持以下规则：

1. 不能新定义操作符，只能重载已经存在的操作符。
2. 重载后的操作符的参数列表必须与原操作符的参数列表相等或与之有所改变（参数数量、参数类型、参数顺序）。
3. 不能改变原操作符的优先级和结合律。
4. 重载后的操作符至少有一个操作数必须是用户自定义的类型（自定义类）。

如果能够遵守上述规则，合理地使用运算符重载功能，可以使程序具有更加灵活、自由和直观的表达能力，提高代码编写效率和质量。

## 总结

本文详细地介绍了 C++ 中运算符重载的概念、定义方法、重要性及其注意事项。通过实现一个对自定义整型类进行前置递增运算符重载的实例，说明了如何在编写代码时充分利用运算符重载功能，提高程序的复用性和可维护性。希望读者可以通过本文的学习，掌握运算符重载的相关知识，并在实际应用中充分发挥其作用。