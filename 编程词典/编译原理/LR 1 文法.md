# LR(1)文法

我们前面介绍了许多文法，其中包括LR(0)、SLR、LR(1)等等文法。本篇文章我们将介绍LR(1)文法，这是一种比LR(0)和SLR更加强大的文法，可以解决更多的文法问题。

## LR(1) Item

LR(1)文法的关键在于LR(1) Item，它比LR(0) Item多了一部分内容——向前看符号。什么是向前看符号呢？假如我们有一个产生式：
```
S -> AaB
```
那么在S -> A•aB这个LR(0) item的基础上，我们需要跟上向前看符号a，变成：S -> A•aB, a。其中“.”的右边是已经匹配的部分，“.”的左边是未匹配的部分，“，”后面是向前看符号。

## LR(1)自动机

LR(1)自动机与SLR自动机的结构非常相似，都是DFA的结构。但是，LR(1)自动机要处理的数据要比SLR自动机更加复杂一些。对于同一个状态，根据不同的向前看符号，可能会衍生出不同的状态。这使得构造LR(1)自动机比构造SLR自动机更加复杂一些。

## LR(1)分析表

LR(1)分析表的构造方法和SLR分析表有些相似，但是有一些重要的区别。在SLR分析表中，我们只需要将FOLLOW集加入分析表中即可。但是在LR(1)分析表中，由于包含向前看符号，对于同一个状态，不同的向前看符号可能会对应着不同的动作。因此在LR(1)分析表中，每个单元需要记录两个东西：状态编号和向前看符号。

## 优缺点

LR(1)文法比LR(0)文法和SLR文法要强大一些，可以解决更多的文法问题。但是，由于在构造LR(1)自动机以及LR(1)分析表的过程中，需要用到向前看符号，所以确定性是无法保证的。因此，相比LR(0)和SLR文法，LR(1)文法构造出的自动机可能会非常庞大，且解析速度较慢。

以上就是LR(1)文法的相关介绍。LR(1)文法比LR(0)和SLR文法要强大一些，但是同时也存在一些缺陷。在实际编译器的设计过程中，需要根据具体的情况选择不同的文法。