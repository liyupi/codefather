# 词法分析

计算机是无法理解我们人类使用的语言，并且我们人类在写程序时，常常使用的词汇和写作风格都与一般的文学作品不同。因此，我们人类的计算机程序需要经过一定的处理才能变成计算机能够理解并执行的代码。其中，词法分析就是编译程序的第一步，是程序翻译的基础和前提。

## 什么是词法分析

词法分析器（Lexical Analyzer）是一种将代码字符序列分解成定义了词法规则的词法单元序列的程序。它故名思义，就是对程序进行词法分析，将每个代码单元解析为一个Token，这些Token可以是操作符、变量、数字、字符串、注释等，它们是语法分析器的输入。实际上，词法分析器就是一个将字符序列转化成Token序列的自动机。

## 词法分析的流程

词法分析主要描述了如何从字符流中截取单词，不同的符号被定义成了具有相应含义的词素（Token）。其运作流程一般包含以下几个步骤：

### 1、字符扫描

计算机并不是从文件中一次性读取整个程序文本，而是从程序文本中逐个字符读取，在读取过程中，词法分析器会扫描成百上千个字符，并将它们分组为更有意义的语言单元—— Token，比如 *、+ 号表示操作符，而数字和字符串等东西就称作字面量。

### 2、自动机匹配

词法分析器还会使用有限状态自动机（DFA）来模式匹配所有代码，在模式识别中可以采用正则表达式等方式进行。在这个过程中，词法分析器会扫描自动机，并尝试在当前输入的代码中识别出词法单元。当遭遇 Token 的结束标志时，词法分析器会将生成的 Token 交给语法分析器进行下一步处理。

### 3、Token生成

在字符扫描和自动机匹配阶段结束后，所有的 Token 都已经生成了。一个 Token 包含标识符，令牌值和令牌类型等信息。令牌类型是根据自动机匹配结果和其它诸如类型、范围、访问权限等信息得出的。

## 词法分析器的构建方式

词法分析器通常是由词法规范表达式生成的。在实践中，有许多工具可以生成这些表达式。例如，Java CC（Java Compiler Compiler）和COCO/R（Combinator Compiler-Compiler for Recursive Descent Parser）都是常用的词法生成器。

基于以上内容，我想你已经初步了解词法分析器的相关知识，包括它的作用、运作流程和构建方式等，这都是编程领域中比较基础但又非常重要的知识点。