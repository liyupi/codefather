# LR语法分析器

LR语法分析器是一种在编译原理中广泛使用的自底向上语法分析器。和其他自底向上文法分析器一样，LR语法分析器从底部开始构建，即从输入字符串（要分析的字符串）的最后一位开始向前读取，逐渐拓展最新的非终结符号的右部到整个非终结符号本身，直到到达语法的开始符号，在这个过程中它采用一个辅助栈来存储符号（非终结符号）并尝试将输入流中的终结符号从左到右移至符号栈中并进行归约操作。

关于LR语法分析器，需要掌握以下几个方面的内容：

## 1. LR分析的过程

LR分析由三部分组成：DFA、LR分析表和LR分析机。

DFA是通过配置项(s, a)计算DFA状态，该状态表示将自动机置于某个状态并读取下一个输入符号将到达什么位置。

LR分析表是自动构建的表，它在运行时随机存取，包含在向a进行移位时应当采取哪种指令（移进）以及在某些情况下应当采取哪种归约指令。LR分析表也包含了错误、接受等状态，使得它能够作为整个算法的控制中枢来工作。

LR分析机是它们之间的桥梁，即从分析表中取出当前状态下该符号应该执行的操作指令，将其执行并更新分析状态。

## 2. LR分析的类型

在LR分析的过程中，会使用不同的方法来构造自动机（DFA），这就导致了LR分析器的种类。有以下几种类型：

### LR(0)

LR(0)是一种使用唯一后缀来判断状态间是否有重合和新状态的LR语法。

术语中的0表示它只使用前面的0个符号来预测，也就是说，它只考虑上面所提到的一部分——后缀。

### SLR(1)

为了获取更优秀的地位，SLR(1)在LR(0)基础上做了一些小的更改。而SLR文法，是最基本的LR文法，且比LR(0)更强大。SLR分析时，仅通过遍历文法的相应终结符可以映射到归约规则。

### LR(1)

LR(1)分析器对上述LR(0)分析方法进行了扩展，因为它在状态间使用了LR分析的更多前缀，所以防止了许多LR(0)分析器的语法错误并使它更容易创建语义正确的文法。

### LALR(1)

LALR是将SLR和子集合并复合，得到在LR(1)的基础上更节省空间的分析器。

## 3. LR语法分析器的优点

LR语法分析器的优点在于它可以通过自底向上的方式接受大多数上下文无关文法，这意味着与其他算法相比，LR语法分析器可以“忽略”文法的复杂性。此外，LR语法分析器可以识别、错误报告几乎所有的（附加到语法中的）错误。