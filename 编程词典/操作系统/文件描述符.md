# 文件描述符

在 Unix-Like 的系统中，文件系统是以文件的形式来呈现的，包括驱动、socket、管道等其他资源。为了方便用户程序访问这些资源，引入了文件描述符的概念。

所谓文件描述符，它是一个非负整数，代表一个文件资源（文件、管道、socket 等）的引用。拿 Unix 系统来说，标准输入对应的文件描述符是 0，标准输出对应的文件描述符是 1，标准错误对应的文件描述符是 2。

文件描述符可以通过各种 I/O 框架（如 select、poll、epoll）来进行传递和监控，使得在用户程序和系统之间传递的信息更加精简和高效。

举个例子来说，当我们执行下面的命令时：
```
ls > file.txt
```

其中，`>` 表示输出重定向，将 `ls` 命令的输出结果写入 `file.txt` 文件中。在执行这一命令时，会创建一个新的文件 `file.txt`，并且将其打开，此时文件描述符就指向了这个文件。假设此时文件描述符的值为 n，那么在接下来的操作中，就可以通过这个描述符来对这个文件进行读写。

在程序中，最常用的操作是创建文件描述符，常用函数如下：

```
int open(const char *pathname, int flags, mode_t mode);
```

其中，`pathname` 参数指定了文件的路径，`flags` 参数指定了打开的方式和操作，`mode` 参数指定了创建新文件时的权限。

另外，每个进程都有自己的文件描述符表，其中每个文件描述符的作用域仅限于进程中，在跨进程传递时需要转换为全局唯一的 文件句柄。

文件描述符是 UNIX 系统中非常基础的概念，也是 I/O 编程和系统编程的重要内容，理解和掌握它可以让程序员更好地进行底层系统编程，建立更加高效的程序。